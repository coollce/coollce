import subprocess,time
rad_path="rad_windows_amd64.exe"
xray_path="xray_windows_amd64.exe"
url="http://10.51.30.34:8999"
xrayProxy="127.0.0.1:7799"
# xrayShell = [xray_path, "webscan", "--listen", xrayProxy, "--html-output", "result.html"]
# subprocess.Popen(xrayShell)
#
# cmd = [rad_path,"-t",url,"-http-proxy",xrayProxy]
# rsp=subprocess.Popen(cmd,start_new_session=True)
# rsp.communicate()

def Scan(target,startxray):
	cmd = [rad_path,"-t",target,"-wait-login","-http-proxy",xrayProxy]
	rsp=subprocess.Popen(cmd,start_new_session=True)
	rsp.communicate()


# with open("target.txt","r") as targats:
xrayShell = [xray_path, "webscan", "--listen", xrayProxy, "--html-output", "result4.html"]
startxray = subprocess.Popen(xrayShell)
time.sleep(10)
# targat = targats.readline().strip("\n")

Scan(url,startxray)
